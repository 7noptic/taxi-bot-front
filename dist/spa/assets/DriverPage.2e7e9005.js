import{Q as lu,a as Eu,b as tu,c as bu}from"./QTabPanels.ebb6d31a.js";import{Q as Cu,a as vu,b as ou,c as G}from"./QCard.440d414a.js";import{$ as I,Q as X}from"./QInput.76567d60.js";import{j as au,r as s,w as Z,i as cu,y as gu,m as e,n as b,p as o,ab as x,q as n,A as E,B as uu,F as D,ac as U,t as i,u as c,ae as q,z as Q,_ as Du,ad as Y,s as S,aJ as nu,a as H,af as ku,ag as Bu,Q as yu,a9 as _u,aK as Fu}from"./index.327b4700.js";import{f as su,Q as wu,g as W,a as Au,b as Pu,T as iu}from"./TableSkeleton.772c2dc2.js";import{e as ru}from"./helpers.5a00600a.js";import{M as N}from"./mode.table.8dd12f40.js";import{_ as Vu}from"./CopyText.9704d296.js";import{Q as hu}from"./QChatMessage.e2a8fe9c.js";import{Q as xu}from"./QDrawer.cf49ccae.js";import{Q as Iu,T as Qu,C as Tu,a as Lu}from"./TableOrder.b3289eea.js";import{Q as Nu,a as Ru}from"./QLayout.7d74878c.js";import{_ as mu}from"./plugin-vue_export-helper.21dcd24c.js";import"./QResizeObserver.bc18afd9.js";import"./QItem.cb161c91.js";import"./use-dark.5b66a423.js";import"./touch.9135741d.js";import"./axios.4e4c9ce2.js";import"./QList.421edf4a.js";import"./QSkeleton.e61b48c4.js";var pu=(p=>(p.Online="online",p.Offline="offline",p))(pu||{}),eu=(p=>(p[p.DELIVERY=su.DELIVERY]="DELIVERY",p[p.DRIVE=su.DRIVE]="DRIVE",p.ALL="all",p))(eu||{});const $u={all:"\u0412\u0441\u0435 \u0437\u0430\u043A\u0430\u0437\u044B",[eu.DRIVE]:"\u041F\u043E\u0435\u0437\u0434\u043A\u0438",[eu.DELIVERY]:"\u0414\u043E\u0441\u0442\u0430\u0432\u043A\u0430"};var fu=(p=>(p.No="no",p.NotPaid="notPaid",p.NotConfirmed="notConfirmed",p))(fu||{});const Mu={class:"text-h4"},Uu={key:1,style:{"max-width":"500px"}},Su={key:0,style:{"max-width":"300px"}},qu=au({name:"ModalDriver",__name:"Driver",props:{modelValue:{type:Boolean,default:!1},chatId:{default:0}},emits:["update:modelValue"],setup(p,{emit:$}){const M={username:"Username",phone:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",last_name:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F",city:"\u0413\u043E\u0440\u043E\u0434",createdAt:"\u0421\u043E\u0437\u0434\u0430\u043D",leftReview:"\u041E\u0441\u0442\u0430\u0432\u0438\u043B \u043E\u0442\u0437\u044B\u0432\u043E\u0432",countOrders:"\u0412\u0441\u0435\u0433\u043E \u0437\u0430\u043A\u0430\u0437\u043E\u0432",driveCount:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u043F\u043E\u0435\u0437\u0434\u043E\u043A",deliveryCount:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0434\u043E\u0441\u0442\u0430\u0432\u043E\u043A",canceledCount:"\u041E\u0442\u043C\u0435\u043D\u0435\u043D\u043E \u0437\u0430\u043A\u0430\u0437\u043E\u0432",averageRating:"\u0420\u0435\u0439\u0442\u0438\u043D\u0433",receivedReview:"\u041F\u043E\u043B\u0443\u0447\u0438\u043B \u043E\u0442\u0437\u044B\u0432\u043E\u0432",isBusy:"\u0417\u0430\u043D\u044F\u0442\u043E\u0441\u0442\u044C \u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044F.",car:"\u041C\u0430\u0448\u0438\u043D\u0430",priority:"\u041F\u0440\u0438\u043E\u0440\u0438\u0442\u0435\u0442",accessOrderType:"\u0422\u0438\u043F \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u043C\u044B\u0445 \u0437\u0430\u043A\u0430\u0437\u043E\u0432",commission:"\u041A\u043E\u043C\u0438\u0441\u0441\u0438\u044F",notes:"\u0417\u0430\u043C\u0435\u0442\u043A\u0438"},f=s([]),A=s(!1),k=s(!1),F=s(!1),m=s(!1),w=s(""),g=s(""),P=s(""),V=s(""),C=p,j=$,u=s(),B=s(C.modelValue),t=s(!1),R=l=>{f.value=l,A.value=!0},O=l=>{if("orderId"in l)return[`\u0417\u0430\u043A\u0430\u0437: ${l.orderId}`,`\u0422\u0435\u043A\u0441\u0442: ${l.text}`];if("chatId"in l)return[l.text]},z=()=>{var a;const l={chatId:(a=u.value)==null?void 0:a.chatId,text:P.value};I.sendNotes(l,v=>{console.log(v),x.create({message:"\u0417\u0430\u043C\u0435\u0442\u043A\u0430 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0430",color:"positive",timeout:1e3}),J(),F.value=!1},v=>console.log(v))};Z(()=>B.value,l=>j("update:modelValue",l)),Z(()=>C.modelValue,l=>B.value=l),Z(()=>C.chatId,()=>J());const _=()=>{var l;t.value=!0,I.activatedDriver((l=u.value)==null?void 0:l.chatId,a=>{u.value.isBlocked=a.isBlocked,t.value=!1},a=>{x.create({message:"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A\u{1F61E}...",color:"negative",timeout:1e3}),console.log(a),t.value=!1})},h=cu("bus"),r=()=>{var l;m.value=!0,I.deleteDriver((l=u.value)==null?void 0:l.chatId,a=>{a?(h.emit("update-drivers"),B.value=!1,m.value=!1,x.create({message:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D",color:"positive",timeout:1e3})):(x.create({message:"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A\u{1F61E}...",color:"negative",timeout:1e3}),m.value=!1)},a=>{x.create({message:"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A\u{1F61E}...",color:"negative",timeout:1e3}),console.log(a),m.value=!1})},y=async()=>{var l,a,v,d;t.value=!0,((l=u.value)==null?void 0:l.isBlocked)===!0?I.unlockedDriver((a=u.value)==null?void 0:a.chatId,T=>{u.value.isBlocked=T.isBlocked,t.value=!1},T=>{x.create({message:"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A\u{1F61E}...",color:"negative",timeout:1e3}),console.log(T),t.value=!1}):((v=u.value)==null?void 0:v.isBlocked)===!1&&I.lockedDriver((d=u.value)==null?void 0:d.chatId,T=>{u.value.isBlocked=T.isBlocked,t.value=!1},T=>{x.create({message:"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A\u{1F61E}...",color:"negative",timeout:1e3}),console.log(T),t.value=!1})},K=async()=>{if(!+w.value||!+g.value||+g.value<=0||+w.value<=0||+w.value>100){x.create({message:"\u0427\u0442\u043E \u0442\u043E \u043D\u0435 \u0442\u0430\u043A \u0441 \u0434\u0430\u043D\u043D\u044B\u043C\u0438",color:"negative",timeout:1e3});return}m.value=!0,await I.updateDriverCommission(C.chatId,{commission:+w.value,countDays:+g.value},l=>{console.log(l),u.value={...u.value,...l},x.create({message:"\u041A\u043E\u043C\u0438\u0441\u0441\u0438\u044F \u0432\u043E\u0434\u0438\u0442\u0435\u043B\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430",color:"positive",timeout:1e3}),m.value=!1,k.value=!1},l=>{x.create({message:"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A\u{1F61E}...",color:"negative",timeout:1e3}),console.log(l),m.value=!1})},J=()=>{C.chatId!==0&&I.getFullDriverInfo(C.chatId,l=>{console.log(l),u.value=l},l=>{x.create({message:"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A\u{1F61E}...",color:"negative",timeout:1e3}),console.log(l)})};return gu(()=>{J()}),(l,a)=>(e(),b(Cu,{modelValue:B.value,"onUpdate:modelValue":a[9]||(a[9]=v=>B.value=v)},{default:o(()=>[u.value?(e(),b(Nu,{key:0,class:"bg-white text-dark layout",container:"",view:"lhh lpR fff"},{default:o(()=>[n(xu,{modelValue:A.value,"onUpdate:modelValue":a[0]||(a[0]=v=>A.value=v),breakpoint:1e4,bordered:"",class:"bg-grey-3 text-dark q-pa-sm",side:"right"},{default:o(()=>[(e(!0),E(D,null,uu(f.value,(v,d)=>(e(),b(hu,{key:v==null?void 0:v.name,"bg-color":d%2===0?"blue":"green",stamp:v!=null&&v.createdAt?new Date(v==null?void 0:v.createdAt).toLocaleDateString():void 0,text:O(v),sent:""},null,8,["bg-color","stamp","text"]))),128))]),_:1},8,["modelValue"]),n(Ru,null,{default:o(()=>[n(vu,{padding:""},{default:o(()=>[n(ou,{class:"row items-center q-pb-none"},{default:o(()=>[U("div",Mu,[i(c(u.value.first_name||u.value.username||"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C")+" ",1),U("b",null,"("+c(u.value.chatId)+")",1),i(" "+c(u.value.status===q(pu).Online?"\u{1F7E2}":"\u{1F534}")+" "+c(u.value.status),1)]),n(Q,{loading:m.value,class:"q-my-sm q-ml-md",color:"red",size:"xs",onClick:r},{default:o(()=>[i(" \u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F ")]),_:1},8,["loading"]),n(Iu),Du(n(Q,{dense:"",flat:"",icon:"close",round:""},null,512),[[Lu]])]),_:1}),n(ou,null,{default:o(()=>[(e(),E(D,null,uu(M,(v,d)=>{var T;return U("div",{key:d,class:"table-item"},[U("b",null,c(v)+": ",1),U("span",null,[d==="averageRating"?(e(),E(D,{key:0},[i(c(u.value[d].toFixed(2)),1)],64)):d==="createdAt"?(e(),E(D,{key:1},[i(c(new Date(u.value[d]).toLocaleDateString("ru-RU")),1)],64)):d==="car"?(e(),E(D,{key:2},[i(c(u.value.car.carColor)+" "+c(u.value.car.carBrand)+" | "+c(u.value.car.carNumber),1)],64)):d==="accessOrderType"?(e(),E(D,{key:3},[i(c(q($u)[u.value[d]]),1)],64)):d==="notes"?(e(),E(D,{key:4},[i(c((T=u.value[d])==null?void 0:T.length)+" ",1),u.value.notes.length?(e(),b(G,{key:0,clickable:"",color:"teal",dense:"",icon:"visibility","text-color":"white",onClick:a[1]||(a[1]=Y(L=>R(u.value.notes),["stop"]))},{default:o(()=>[i(" \u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C ")]),_:1})):S("",!0),n(G,{clickable:"",color:"teal",dense:"",icon:"edit","text-color":"white",onClick:a[2]||(a[2]=Y(L=>F.value=!F.value,["stop"]))},{default:o(()=>[i(" \u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 ")]),_:1}),F.value?(e(),E("div",Uu,[n(X,{modelValue:P.value,"onUpdate:modelValue":a[3]||(a[3]=L=>P.value=L),filled:"",label:"\u0417\u0430\u043C\u0435\u0442\u043A\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043A\u0441\u0442 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",type:"textarea"},null,8,["modelValue"]),n(Q,{onClick:z},{default:o(()=>[i(" \u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C ")]),_:1})])):S("",!0)],64)):d==="leftReview"?(e(),E(D,{key:5},[i(c(u.value[d])+" ",1),u.value.reviewFrom.length?(e(),b(G,{key:0,clickable:"",color:"teal",dense:"",icon:"visibility","text-color":"white",onClick:a[4]||(a[4]=Y(L=>R(u.value.reviewFrom),["stop"]))},{default:o(()=>[i(" \u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C ")]),_:1})):S("",!0)],64)):d==="isBusy"?(e(),E(D,{key:6},[i(c(u.value[d]?"\u041D\u0430 \u0437\u0430\u043A\u0430\u0437\u0435":"\u041D\u0435 \u043D\u0430 \u0437\u0430\u043A\u0430\u0437\u0435"),1)],64)):d==="commission"?(e(),E(D,{key:7},[i(c(new Date(u.value.commissionExpiryDate)>new Date?u.value[d]:0)+" \u0440\u0443\u0431. ",1),n(G,{clickable:"",color:"teal",dense:"",icon:"visibility","text-color":"white",onClick:a[5]||(a[5]=Y(L=>k.value=!k.value,["stop"]))},{default:o(()=>[i(" \u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C ")]),_:1}),k.value?(e(),E("div",Su,[n(X,{modelValue:w.value,"onUpdate:modelValue":a[6]||(a[6]=L=>w.value=L),modelModifiers:{trim:!0,number:!0},disable:m.value,error:!!V.value,class:"add__input",dense:"",label:"\u0420\u0430\u0437\u043C\u0435\u0440 \u043A\u043E\u043C\u0438\u0441\u0441\u0438\u0438 \u0432 \u0440\u0443\u0431\u043B\u044F\u0445",outlined:""},null,8,["modelValue","disable","error"]),n(X,{modelValue:g.value,"onUpdate:modelValue":a[7]||(a[7]=L=>g.value=L),modelModifiers:{trim:!0,number:!0},disable:m.value,error:!!V.value,class:"add__input",dense:"",label:"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0434\u043D\u0435\u0439",outlined:"",onKeyup:nu(K,["enter"])},null,8,["modelValue","disable","error"]),n(Q,{disable:m.value||!w.value||!g.value,class:"add__button full-width",color:"primary",label:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",standout:"",unelevated:"",onClick:Y(K,["stop"]),onKeyup:nu(K,["enter"])},null,8,["disable"])])):S("",!0)],64)):d==="receivedReview"?(e(),E(D,{key:8},[i(c(u.value[d])+" ",1),u.value.reviewTo.length?(e(),b(G,{key:0,clickable:"",color:"teal",dense:"",icon:"visibility","text-color":"white",onClick:a[8]||(a[8]=Y(L=>R(u.value.reviewTo),["stop"]))},{default:o(()=>[i(" \u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C ")]),_:1})):S("",!0)],64)):(e(),E(D,{key:9},[i(c(u.value[d]),1)],64))])])}),64)),u.value.isBlocked&&u.value.blockedType===q(fu).NotConfirmed?(e(),b(Q,{key:0,loading:t.value,class:"q-my-sm q-mb-xl",color:"green",onClick:_},{loading:o(()=>[i(" Loading...")]),default:o(()=>[i(" \u0410\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u0442\u044C ")]),_:1},8,["loading"])):(e(),b(Q,{key:1,color:u.value.isBlocked?"green":"red",loading:t.value,class:"q-my-sm q-mb-xl",onClick:y},{loading:o(()=>[i(" Loading...")]),default:o(()=>[i(c(u.value.isBlocked?"\u0420\u0430\u0437\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C":"\u0417\u0430\u0431\u043B\u043E\u043A\u0438\u0440\u043E\u0432\u0430\u0442\u044C")+" ",1)]),_:1},8,["color","loading"])),n(Qu,{"hidden-fields":["driverId","city"],list:u.value.orders,mode:q(N).All},null,8,["list","mode"])]),_:1})]),_:1})]),_:1})]),_:1})):(e(),b(Tu,{key:1}))]),_:1},8,["modelValue"]))}});var Ou=mu(qu,[["__scopeId","data-v-db7d9fe6"]]);const Ku=au({__name:"TableDriver",props:{list:{default:()=>[]},hiddenFields:{default:()=>[]},pagination:{default:()=>({currentPage:1,perPageCount:10,total:0})},mode:{default:N.Page},loading:{type:Boolean,default:!1}},emits:["selectPage","update"],setup(p,{emit:$}){const M=$,f=p,A=s([]),k=s(""),F=H(()=>Math.ceil(f.pagination.total/f.pagination.perPageCount)),m=s(!1),w=H(()=>m.value||f.loading),g=s(f.mode),P=s(),V=s(!1),C=s(!1),j=H(()=>f.hiddenFields.length?W.filter(_=>!f.hiddenFields.includes(_.field)):W),u=H(()=>g.value==N.Page?{rowsPerPage:f.pagination.perPageCount,page:f.pagination.currentPage,rowsNumber:Number(f.pagination.total)}:{rowsPerPage:f.pagination.perPageCount}),B=ku(async _=>{k.value=_,m.value=!0;const h=()=>{A.value=[],g.value=f.mode,m.value=!1};if(!k.value){h();return}if(g.value===N.All&&f.mode==N.All){A.value=f.list.filter(r=>r.chatId.toString()==k.value),m.value=!1;return}await I.findDriverByChatId(k.value,r=>{g.value=N.All,A.value=r?[r]:[],m.value=!1},h())},700),t=async()=>{C.value=!0,g.value===N.All?(await ru(W,z.value),C.value=!1):g.value===N.Page&&I.getAllDrivers(async _=>{await ru(W,_.data),C.value=!1},_=>{C.value=!1,console.log(_)})},R=_=>{P.value=_,V.value=!0},O=_=>{M("selectPage",_)},z=H(()=>k.value?A.value:f.list);return(_,h)=>(e(),E(D,null,[(e(),b(wu,{key:u.value,columns:j.value,loading:w.value,pagination:u.value,rows:z.value,"rows-per-page-options":g.value==q(N).Page?[10]:[5,7,10,15,20,25,50,0],class:"table-passenger","row-key":"name",title:"\u0412\u043E\u0434\u0438\u0442\u0435\u043B\u0438"},Bu({"top-left":o(()=>[n(X,{"model-value":k.value,debounce:"300",dense:"",outlined:"",placeholder:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E ID/\u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443",standout:"","onUpdate:modelValue":q(B)},{append:o(()=>[n(yu,{name:"search"})]),_:1},8,["model-value","onUpdate:modelValue"])]),body:o(r=>[n(Pu,{props:r,class:"table-passenger__row",onClick:y=>{var K;return R((K=r.cols.find(J=>J.name==="chatId"))==null?void 0:K.value)}},{default:o(()=>[(e(!0),E(D,null,uu(r.cols,y=>(e(),b(Au,{key:y.name,props:r},{default:o(()=>[y.name=="rating"?(e(),E(D,{key:0},[i(c(y.value)+" \u2B50\uFE0F",1)],64)):(y.name==="chatId"||y.name==="phone")&&!!y.value?(e(),E(D,{key:1},[i(c(y.value)+" ",1),n(Vu,{text:y.value.toString()},null,8,["text"])],64)):(e(),E(D,{key:2},[i(c(y.value),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props","onClick"])]),"top-right":o(()=>[n(Q,{disable:!z.value.length,loading:C.value,color:"primary","icon-right":"archive",label:"\u042D\u043A\u0441\u043F\u043E\u0440\u0442 \u0432 csv","no-caps":"",onClick:t},null,8,["disable","loading"])]),_:2},[g.value==q(N).Page?{name:"pagination",fn:o(r=>[U("b",null,c(r.pagination.page),1),i(" \xA0 \u0438\u0437\xA0 "),U("b",null,c(r.pagesNumber),1),r.pagesNumber>2?(e(),b(Q,{key:0,disable:r.isFirstPage,color:"grey-8",dense:"",flat:"",icon:"first_page",round:"",onClick:h[0]||(h[0]=y=>O(1))},null,8,["disable"])):S("",!0),n(Q,{disable:r.isFirstPage,color:"grey-8",dense:"",flat:"",icon:"chevron_left",round:"",onClick:y=>O(r.pagination.page<=1?1:r.pagination.page-1)},null,8,["disable","onClick"]),n(Q,{disable:r.isLastPage,color:"grey-8",dense:"",flat:"",icon:"chevron_right",round:"",onClick:y=>r.pagination.page>=F.value?F.value:O(r.pagination.page+1)},null,8,["disable","onClick"]),r.pagesNumber>2?(e(),b(Q,{key:1,disable:r.isLastPage,color:"grey-8",dense:"",flat:"",icon:"last_page",round:"",onClick:h[1]||(h[1]=y=>O(F.value))},null,8,["disable"])):S("",!0)]),key:"0"}:void 0]),1032,["columns","loading","pagination","rows","rows-per-page-options"])),V.value?(e(),b(Ou,{key:0,modelValue:V.value,"onUpdate:modelValue":h[2]||(h[2]=r=>V.value=r),"chat-id":P.value},null,8,["modelValue","chat-id"])):S("",!0)],64))}});var du=mu(Ku,[["__scopeId","data-v-b6b15324"]]);const ve=au({__name:"DriverPage",setup(p){const $=s("all"),M=cu("bus"),f=s([]),A=s([]),k=s(1),F=s(1),m=s({currentPage:1,perPageCount:10,total:10}),w=s({currentPage:1,perPageCount:10,total:10}),g=s(!1),P=s(!1),V=async B=>{g.value=!0,I.getDrivers({currentPage:B},t=>{f.value=t.data,m.value={currentPage:t.currentPage,perPageCount:t.perPageCount,total:t.total},P.value=!1,g.value=!1},t=>console.log(t))},C=async B=>{g.value=!0,I.getBlockedDrivers({currentPage:B},t=>{console.log(t),A.value=t.data,w.value={currentPage:t.currentPage,perPageCount:t.perPageCount,total:t.total},P.value=!1,g.value=!1},t=>console.log(t))},j=async B=>{k.value=B,await V(k.value)},u=async B=>{F.value=B,await C(F.value)};return gu(async()=>{P.value=!0,await V(k.value),await C(F.value),M.on("update-drivers",()=>V(k.value)),M.on("update-drivers",()=>C(F.value))}),_u(()=>{M.off("update-drivers",V),M.off("update-drivers",C)}),(B,t)=>(e(),b(vu,{class:"q-pa-lg"},{default:o(()=>[U("div",null,[n(Eu,{modelValue:$.value,"onUpdate:modelValue":t[0]||(t[0]=R=>$.value=R),align:"justify",class:"text-primary",dense:"","narrow-indicator":""},{default:o(()=>[n(lu,{ripple:!1,icon:"group",label:"\u0412\u0441\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0438",name:"all"}),n(lu,{class:Fu({"text-red":A.value.length}),ripple:!1,icon:"block",label:"\u041E\u0436\u0438\u0434\u0430\u044E\u0442 \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u044F",name:"blocked"},null,8,["class"])]),_:1},8,["modelValue"]),n(bu,{modelValue:$.value,"onUpdate:modelValue":t[1]||(t[1]=R=>$.value=R),animated:""},{default:o(()=>[n(tu,{name:"all"},{default:o(()=>[P.value?(e(),b(iu,{key:0,title:"\u0412\u043E\u0434\u0438\u0442\u0435\u043B\u0438"})):(e(),b(du,{key:m.value,list:f.value,loading:g.value,pagination:m.value,onSelectPage:j},null,8,["list","loading","pagination"]))]),_:1}),n(tu,{name:"blocked"},{default:o(()=>[P.value?(e(),b(iu,{key:0,title:"\u0412\u043E\u0434\u0438\u0442\u0435\u043B\u0438"})):(e(),b(du,{key:w.value,list:A.value,loading:g.value,pagination:w.value,onSelectPage:u},null,8,["list","loading","pagination"]))]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}});export{ve as default};
