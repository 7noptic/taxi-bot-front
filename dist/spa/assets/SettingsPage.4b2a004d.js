import{c as Ce,m as Pe,j as Te,b as Be,a as ke}from"./QCard.440d414a.js";import{a as $e,Q as ue,c as qe,b as te}from"./QTabPanels.ebb6d31a.js";import{k as ne,Q as Ie,l as ae,a as je,b as Ne,T as Qe}from"./TableSkeleton.772c2dc2.js";import{$ as w,Q as N,u as Ue,f as ze,a as Me,c as Oe,g as Ke,l as Le,b as Re,h as ge}from"./QInput.76567d60.js";import{j as O,r as g,y as ie,m as b,A as T,ac as h,t as U,u as R,q as d,aJ as Q,ad as J,z as A,n as k,ab as W,p as x,F as H,aN as se,aO as re,a as V,g as ve,X as He,N as Ee,R as We,h as B,c as xe,ao as Fe,W as Xe,i as Ye,aP as Je,aK as Ge,Q as me,B as he,ae as oe,E as Ze,aw as eu,af as uu,ag as tu,s as _e}from"./index.327b4700.js";import{Q as De}from"./QSkeleton.e61b48c4.js";import{_ as X}from"./plugin-vue_export-helper.21dcd24c.js";import{j as au}from"./QItem.cb161c91.js";import{e as be}from"./helpers.5a00600a.js";import{M as L}from"./mode.table.8dd12f40.js";import"./use-dark.5b66a423.js";import"./QResizeObserver.bc18afd9.js";import"./touch.9135741d.js";import"./QList.421edf4a.js";import"./axios.4e4c9ce2.js";const lu={key:0,class:"commission flex items-start"},nu={class:"commission__text"},ou=O({name:"SettingsCommission",__name:"Commission",setup(e){const u=g(),t=g(),n=g(!1),o=g(""),r=g("\u041A\u043E\u043C\u0438\u0441\u0441\u0438\u044F \u0443\u043A\u0430\u0437\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u0432 \u0440\u0443\u0431\u043B\u044F\u0445."),m=()=>{if(o.value="",!t.value||t.value>100||t.value<0){o.value="\u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0432\u0432\u0435\u0434\u0435\u043D\u043D\u044B\u0435 \u0432\u0430\u043C\u0438 \u0434\u0430\u043D\u043D\u044B\u0435";return}w.updateCommission({commission:t.value},a=>{u.value=a,W.create({message:"\u263A\uFE0F \u041A\u043E\u043C\u0438\u0441\u0441\u0438\u044F \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0430",color:"positive",timeout:1500})},a=>{o.value="\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A(((",console.log(a)})};return ie(()=>{w.getSettings(a=>{u.value=a},a=>{console.log(a)})}),(a,l)=>u.value?(b(),T("div",lu,[h("p",nu,[U(" \u0412 \u0434\u0430\u043D\u043D\u044B\u0439 \u043C\u043E\u043C\u0435\u043D\u0442 \u0440\u0430\u0437\u043C\u0435\u0440 \u043A\u043E\u043C\u0438\u0441\u0441\u0438\u0438 \u0441\u043E\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u0442 "),h("b",null,R(u.value.commission)+" \u0440\u0443\u0431.",1)]),d(N,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=i=>t.value=i),modelModifiers:{number:!0},disable:n.value,error:!!o.value,"error-message":o.value,hint:r.value,class:"commission__input",dense:"",label:"\u041A\u043E\u043C\u0438\u0441\u0441\u0438\u044F (\u0440\u0443\u0431.)",outlined:"",onKeyup:Q(m,["enter"])},null,8,["modelValue","disable","error","error-message","hint"]),d(A,{disable:n.value||!t.value,class:"commission__button",color:"primary",label:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",standout:"",unelevated:"",onClick:J(m,["stop"]),onKeyup:Q(m,["enter"])},null,8,["disable"])])):(b(),k(De,{key:1,height:"150px"}))}});var iu=X(ou,[["__scopeId","data-v-5c120c6f"]]);const G=e=>(se("data-v-dc95ce9e"),e=e(),re(),e),su=G(()=>h("b",null,"\u0436\u0438\u0440\u043D\u044B\u043C",-1)),ru=G(()=>h("code",null,R("<b>\u0412\u0430\u0448 \u0442\u0435\u043A\u0441\u0442</b>"),-1)),cu={key:0,class:"container"},du={class:"item"},mu=G(()=>h("h4",{class:"item__title",textContent:"\u0422\u0435\u043A\u0441\u0442 \u0434\u043B\u044F \u0412\u043E\u043F\u0440\u043E\u0441-\u043E\u0442\u0432\u0435\u0442"},null,-1)),vu={class:"item"},fu=G(()=>h("h4",{class:"item__title",textContent:"\u0422\u0435\u043A\u0441\u0442 \u0434\u043B\u044F \u{1F4B5} \u0421\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C \u0443\u0441\u043B\u0443\u0433"},null,-1)),pu={class:"item"},gu=G(()=>h("h4",{class:"item__title",textContent:"\u0422\u0435\u043A\u0441\u0442 \u0434\u043B\u044F \u041E\u0431\u0440\u0430\u0442\u0438\u0442\u044C\u0441\u044F \u0432 \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0443"},null,-1)),_u={class:"item"},bu=G(()=>h("h4",{class:"item__title",textContent:"\u0422\u0435\u043A\u0441\u0442 \u0434\u043B\u044F \u2139\uFE0F0 \u0441\u0435\u0440\u0432\u0438\u0441\u0435"},null,-1)),yu=O({name:"SettingsText",__name:"Text",setup(e){const u=g(),t=g(!1),n=()=>{!u.value||!u.value.faqText||(t.value=!0,w.updateFaqText({faqText:u.value.faqText},a=>{u.value=a,t.value=!1,W.create({message:"\u263A\uFE0F \u0422\u0435\u043A\u0441\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D",color:"positive",timeout:1500})},a=>{console.log(a),t.value=!1}))},o=()=>{var a,l;!u.value||!((a=u.value)!=null&&a.priceText)||(t.value=!0,w.updatePriceText({priceText:(l=u.value)==null?void 0:l.priceText},i=>{u.value=i,t.value=!1,W.create({message:"\u263A\uFE0F \u0422\u0435\u043A\u0441\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D",color:"positive",timeout:1500})},i=>{console.log(i),t.value=!1}))},r=()=>{var a,l;!u.value||!((a=u.value)!=null&&a.supportText)||(t.value=!0,w.updateSupportText({supportText:(l=u.value)==null?void 0:l.supportText},i=>{u.value=i,t.value=!1,W.create({message:"\u263A\uFE0F \u0422\u0435\u043A\u0441\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D",color:"positive",timeout:1500})},i=>{console.log(i),t.value=!1}))},m=()=>{var a,l;!u.value||!((a=u.value)!=null&&a.aboutText)||(t.value=!0,w.updateAboutText({aboutText:(l=u.value)==null?void 0:l.aboutText},i=>{u.value=i,t.value=!1,W.create({message:"\u263A\uFE0F \u0422\u0435\u043A\u0441\u0442 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D",color:"positive",timeout:1500})},i=>{console.log(i),t.value=!1}))};return ie(()=>{w.getSettings(a=>{u.value=a},a=>{console.log(a)})}),(a,l)=>(b(),T(H,null,[d(Ce,{class:"text q-mb-md"},{default:x(()=>[U(" \u0427\u0442\u043E\u0431\u044B \u0432\u044B\u0434\u0435\u043B\u0438\u0442\u044C \u0442\u0435\u043A\u0441\u0442 \xA0"),su,U(" \xA0\u0437\u0430\u043A\u043B\u044E\u0447\u0438\u0442\u0435 \u0435\u0433\u043E \u043C\u0435\u0436\u0434\u0443 \u0442\u0435\u0433\u0430\u043C\u0438\xA0 "),ru]),_:1}),u.value?(b(),T("div",cu,[h("div",du,[mu,d(N,{modelValue:u.value.faqText,"onUpdate:modelValue":l[0]||(l[0]=i=>u.value.faqText=i),autogrow:"",class:"q-mb-sm item__input",filled:""},null,8,["modelValue"]),d(A,{disable:t.value||!u.value.faqText,class:"full-width item__button",color:"primary",label:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",standout:"",unelevated:"",onClick:J(n,["stop"]),onKeyup:Q(n,["enter"])},null,8,["disable"])]),d(ne,{class:"separator"}),h("div",vu,[fu,d(N,{modelValue:u.value.priceText,"onUpdate:modelValue":l[1]||(l[1]=i=>u.value.priceText=i),autogrow:"",class:"q-mb-sm item__input",filled:""},null,8,["modelValue"]),d(A,{disable:t.value||!u.value.priceText,class:"full-width item__button",color:"primary",label:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",standout:"",unelevated:"",onClick:J(o,["stop"]),onKeyup:Q(o,["enter"])},null,8,["disable"])]),d(ne,{class:"separator"}),h("div",pu,[gu,d(N,{modelValue:u.value.supportText,"onUpdate:modelValue":l[2]||(l[2]=i=>u.value.supportText=i),autogrow:"",class:"q-mb-sm item__input",filled:""},null,8,["modelValue"]),d(A,{disable:t.value||!u.value.supportText,class:"full-width item__button",color:"primary",label:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",standout:"",unelevated:"",onClick:J(r,["stop"]),onKeyup:Q(r,["enter"])},null,8,["disable"])]),d(ne,{class:"separator"}),h("div",_u,[bu,d(N,{modelValue:u.value.aboutText,"onUpdate:modelValue":l[3]||(l[3]=i=>u.value.aboutText=i),autogrow:"",class:"q-mb-sm item__input",filled:""},null,8,["modelValue"]),d(A,{disable:t.value||!u.value.aboutText,class:"full-width item__button",color:"primary",label:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",standout:"",unelevated:"",onClick:J(m,["stop"]),onKeyup:Q(m,["enter"])},null,8,["disable"])])])):(b(),k(De,{key:1,height:"150px"}))],64))}});var Cu=X(yu,[["__scopeId","data-v-dc95ce9e"]]),Ve=(e=>(e.Profile="profile",e.Help="help",e.Settings="settings",e.Addresses="addresses",e.Commission="commission",e.Statistic="statistic",e.InDrive="inDrive",e))(Ve||{});function Y(e,u,t,n){const o=[];return e.forEach(r=>{n(r)===!0?o.push(r):u.push({failedPropValidation:t,file:r})}),o}function le(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Ee(e)}const Eu={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},xu=["rejected"];function Fu({editable:e,dnd:u,getFileInput:t,addFilesToQueue:n}){const{props:o,emit:r,proxy:m}=ve(),a=g(null),l=V(()=>o.accept!==void 0?o.accept.split(",").map(v=>(v=v.trim(),v==="*"?"*/":(v.endsWith("/*")&&(v=v.slice(0,v.length-1)),v.toUpperCase()))):null),i=V(()=>parseInt(o.maxFiles,10)),F=V(()=>parseInt(o.maxTotalSize,10));function $(v){if(e.value)if(v!==Object(v)&&(v={target:null}),v.target!==null&&v.target.matches('input[type="file"]')===!0)v.clientX===0&&v.clientY===0&&He(v);else{const S=t();S&&S!==v.target&&S.click(v)}}function I(v){e.value&&v&&n(null,v)}function q(v,S,D,C){let s=Array.from(S||v.target.files);const c=[],_=()=>{c.length!==0&&r("rejected",c)};if(o.accept!==void 0&&l.value.indexOf("*/")===-1&&(s=Y(s,c,"accept",f=>l.value.some(E=>f.type.toUpperCase().startsWith(E)||f.name.toUpperCase().endsWith(E))),s.length===0))return _();if(o.maxFileSize!==void 0){const f=parseInt(o.maxFileSize,10);if(s=Y(s,c,"max-file-size",E=>E.size<=f),s.length===0)return _()}if(o.multiple!==!0&&s.length!==0&&(s=[s[0]]),s.forEach(f=>{f.__key=f.webkitRelativePath+f.lastModified+f.name+f.size}),C===!0){const f=D.map(E=>E.__key);s=Y(s,c,"duplicate",E=>f.includes(E.__key)===!1)}if(s.length===0)return _();if(o.maxTotalSize!==void 0){let f=C===!0?D.reduce((E,ce)=>E+ce.size,0):0;if(s=Y(s,c,"max-total-size",E=>(f+=E.size,f<=F.value)),s.length===0)return _()}if(typeof o.filter=="function"){const f=o.filter(s);s=Y(s,c,"filter",E=>f.includes(E))}if(o.maxFiles!==void 0){let f=C===!0?D.length:0;if(s=Y(s,c,"max-files",()=>(f++,f<=i.value)),s.length===0)return _()}if(_(),s.length!==0)return s}function z(v){le(v),u.value!==!0&&(u.value=!0)}function y(v){Ee(v),(v.relatedTarget!==null||We.is.safari!==!0?v.relatedTarget!==a.value:document.elementsFromPoint(v.clientX,v.clientY).includes(a.value)===!1)===!0&&(u.value=!1)}function M(v){le(v);const S=v.dataTransfer.files;S.length!==0&&n(null,S),u.value=!1}function K(v){if(u.value===!0)return B("div",{ref:a,class:`q-${v}__dnd absolute-full`,onDragenter:le,onDragover:le,onDragleave:y,onDrop:M})}return Object.assign(m,{pickFiles:$,addFiles:I}),{pickFiles:$,addFiles:I,onDragover:z,onDragleave:y,processFiles:q,getDndNode:K,maxFilesNumber:i,maxTotalSizeNumber:F}}var hu=xe({name:"QFile",inheritAttrs:!1,props:{...Ue,...ze,...Eu,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Me,...xu],setup(e,{slots:u,emit:t,attrs:n}){const{proxy:o}=ve(),r=Oe(),m=g(null),a=g(!1),l=Ke(e),{pickFiles:i,onDragover:F,onDragleave:$,processFiles:I,getDndNode:q}=Fu({editable:r.editable,dnd:a,getFileInput:fe,addFilesToQueue:pe}),z=Le(e),y=V(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),M=V(()=>ge(y.value)),K=V(()=>y.value.map(p=>p.name).join(", ")),v=V(()=>au(y.value.reduce((p,P)=>p+P.size,0))),S=V(()=>({totalSize:v.value,filesNumber:y.value.length,maxFiles:e.maxFiles})),D=V(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:l.value,...n,id:r.targetUid.value,disabled:r.editable.value!==!0})),C=V(()=>"q-file q-field--auto-height"+(a.value===!0?" q-file--dnd":"")),s=V(()=>e.multiple===!0&&e.append===!0);function c(p){const P=y.value.slice();P.splice(p,1),f(P)}function _(p){const P=y.value.indexOf(p);P!==-1&&c(P)}function f(p){t("update:modelValue",e.multiple===!0?p:p[0])}function E(p){p.keyCode===13&&Xe(p)}function ce(p){(p.keyCode===13||p.keyCode===32)&&i(p)}function fe(){return m.value}function pe(p,P){const j=I(p,P,y.value,s.value),de=fe();de!=null&&(de.value=""),j!==void 0&&((e.multiple===!0?e.modelValue&&j.every(we=>y.value.includes(we)):e.modelValue===j[0])||f(s.value===!0?y.value.concat(j):j))}function ee(){return[B("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function Se(){if(u.file!==void 0)return y.value.length===0?ee():y.value.map((P,j)=>u.file({index:j,file:P,ref:this}));if(u.selected!==void 0)return y.value.length===0?ee():u.selected({files:y.value,ref:this});if(e.useChips===!0)return y.value.length===0?ee():y.value.map((P,j)=>B(Ce,{key:"file-"+j,removable:r.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{c(j)}},()=>B("span",{class:"ellipsis",textContent:P.name})));const p=e.displayValue!==void 0?e.displayValue:K.value;return p.length!==0?[B("div",{class:e.inputClass,style:e.inputStyle,textContent:p})]:ee()}function Ae(){const p={ref:m,...D.value,...z.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:pe};return e.multiple===!0&&(p.multiple=!0),B("input",p)}return Object.assign(r,{fieldClass:C,emitValue:f,hasValue:M,inputRef:m,innerValue:y,floatingLabel:V(()=>M.value===!0||ge(e.displayValue)),computedCounter:V(()=>{if(e.counterLabel!==void 0)return e.counterLabel(S.value);const p=e.maxFiles;return`${y.value.length}${p!==void 0?" / "+p:""} (${v.value})`}),getControlChild:()=>q("file"),getControl:()=>{const p={ref:r.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return r.editable.value===!0&&Object.assign(p,{onDragover:F,onDragleave:$,onKeydown:E,onKeyup:ce}),B("div",p,[Ae()].concat(Se()))}}),Object.assign(o,{removeAtIndex:c,removeFile:_,getNativeElement:()=>m.value}),Fe(o,"nativeEl",()=>m.value),Re(r)}});function Du(){return Ye(Je)}const Vu={class:"image-item"},Su=["src"],Au=O({name:"SettingsImage",__name:"Image",props:{name:{}},setup(e){const u=Du(),t=g(),n=e,o=async()=>{if(!t.value){u.notify({type:"warning",message:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435"});return}const m=new FormData;m.append("files",t.value,`${n.name}.jpg`),w.uploadFile(m,()=>{u.notify({type:"positive",message:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u043E"}),r(),t.value=null},a=>{u.notify({type:"negative",message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F"})})},r=()=>{const m=document.querySelector(`.image-item__image--${n.name}`);m&&(m.src=`${m.src}?${Date.now()}`)};return ie(()=>{r()}),(m,a)=>(b(),T("div",Vu,[h("img",{class:Ge(`image-item__image image-item__image--${m.name}`),src:`http://taxi-bot-backend.ru:3000/static/images/${m.name}.jpg`,alt:""},null,10,Su),d(hu,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=l=>t.value=l),accept:".jpg",dense:"",label:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043D\u043E\u0432\u043E\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435",outlined:""},{prepend:x(()=>[d(me,{name:"attach_file"})]),_:1},8,["modelValue"]),d(A,{disable:!t.value,color:"primary",onClick:o},{default:x(()=>[U("\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 ")]),_:1},8,["disable"])]))}});var wu=X(Au,[["__scopeId","data-v-04f508da"]]);const Pu={class:"images"},Tu=O({name:"SettingsImages",__name:"Images",setup(e){return(u,t)=>(b(),T("div",Pu,[(b(!0),T(H,null,he(Object.values(oe(Ve)),n=>(b(),k(wu,{key:n,name:n},null,8,["name"]))),128))]))}});var Bu=X(Tu,[["__scopeId","data-v-5c91ad2c"]]);function Z(e,u=new WeakMap){if(Object(e)!==e)return e;if(u.has(e))return u.get(e);const t=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const n=e.valueOf();if(Object(n)!==n){const o=new e.constructor(n);return u.set(e,o),o}}return u.set(e,t),e instanceof Set?e.forEach(n=>{t.add(Z(n,u))}):e instanceof Map&&e.forEach((n,o)=>{t.set(o,Z(n,u))}),Object.assign(t,...Object.keys(e).map(n=>({[n]:Z(e[n],u)})))}var ye=xe({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:u,emit:t}){const{proxy:n}=ve(),{$q:o}=n,r=g(null),m=g(""),a=g("");let l=!1;const i=V(()=>Fe({initialValue:m.value,validate:e.validate,set:F,cancel:$,updatePosition:I},"value",()=>a.value,D=>{a.value=D}));function F(){e.validate(a.value)!==!1&&(q()===!0&&(t("save",a.value,m.value),t("update:modelValue",a.value)),z())}function $(){q()===!0&&t("cancel",a.value,m.value),z()}function I(){Ze(()=>{r.value.updatePosition()})}function q(){return eu(a.value,m.value)===!1}function z(){l=!0,r.value.hide()}function y(){l=!1,m.value=Z(e.modelValue),a.value=Z(e.modelValue),t("beforeShow")}function M(){t("show")}function K(){l===!1&&q()===!0&&(e.autoSave===!0&&e.validate(a.value)===!0?(t("save",a.value,m.value),t("update:modelValue",a.value)):t("cancel",a.value,m.value)),t("beforeHide")}function v(){t("hide")}function S(){const D=u.default!==void 0?[].concat(u.default(i.value)):[];return e.title&&D.unshift(B("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&D.push(B("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[B(A,{flat:!0,color:e.color,label:e.labelCancel||o.lang.label.cancel,onClick:$}),B(A,{flat:!0,color:e.color,label:e.labelSet||o.lang.label.set,onClick:F})])),D}return Object.assign(n,{set:F,cancel:$,show(D){r.value!==null&&r.value.show(D)},hide(D){r.value!==null&&r.value.hide(D)},updatePosition:I}),()=>{if(e.disable!==!0)return B(Pe,{ref:r,class:"q-popup-edit",cover:e.cover,onBeforeShow:y,onShow:M,onBeforeHide:K,onHide:v,onEscapeKey:$},S)}}});const ku=e=>(se("data-v-676d1a42"),e=e(),re(),e),$u={class:"container"},qu=ku(()=>h("p",{class:"q-mb-md"},[U(" \u0427\u0442\u043E\u0431\u044B \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0438\u043B\u0438 \u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C \u0443 \u0433\u043E\u0440\u043E\u0434\u0430, \u043F\u0440\u043E\u0441\u0442\u043E \u043A\u043B\u0438\u043A\u043D\u0438\u0442\u0435 \u043F\u043E \u043D\u0443\u0436\u043D\u043E\u043C\u0443 \u043F\u043E\u043B\u044E, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0443\u0436\u043D\u044B\u0435 \u0432\u0430\u043C \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 "),h("code",null,"Enter")],-1)),Iu=O({__name:"TableCity",props:{list:{default:()=>[]},hiddenFields:{default:()=>[]},pagination:{default:()=>({currentPage:1,perPageCount:10,total:0})},mode:{default:L.Page},loading:{type:Boolean,default:!1}},emits:["selectPage","update"],setup(e,{emit:u}){const t=u,n=e,o=g([]),r=g(""),m=V(()=>Math.ceil(n.pagination.total/n.pagination.perPageCount)),a=g(!1),l=V(()=>a.value||n.loading),i=g(n.mode),F=g(!1),$=V(()=>n.hiddenFields.length?ae.filter(C=>!n.hiddenFields.includes(C.field)):ae),I=V(()=>i.value==L.Page?{rowsPerPage:n.pagination.perPageCount,page:n.pagination.currentPage,rowsNumber:Number(n.pagination.total)}:{rowsPerPage:n.pagination.perPageCount}),q=C=>{var s;return(s=C.cols.find(({name:c})=>c==="_id"))==null?void 0:s.value},z=uu(async C=>{r.value=C,a.value=!0;const s=()=>{o.value=[],i.value=n.mode,a.value=!1};if(!r.value){s();return}await w.findCityByName(r.value,c=>{i.value=L.All,o.value=c,a.value=!1},s())},700),y=async()=>{F.value=!0,i.value===L.All?(await be(ae,D.value),F.value=!1):i.value===L.Page&&w.getAllCities(async C=>{await be(ae,C.data),F.value=!1},C=>{F.value=!1,console.log(C)})},M=async C=>{w.deleteCityById(C,async s=>{W.create({message:"\u263A\uFE0F \u0413\u043E\u0440\u043E\u0434 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D",color:"positive",timeout:1500}),t("update")},s=>{F.value=!1,console.log(s)})},K=async(C,s,c)=>{!s||s<=0||s>1e4||w.updateCityById(C,{minPrice:s},async _=>{t("update"),c==null||c.cancel()},_=>{F.value=!1,console.log(_)})},v=async(C,s,c)=>{!s||w.updateCityById(C,{name:s},async _=>{t("update"),c==null||c.cancel()},_=>{F.value=!1,console.log(_)})},S=C=>{t("selectPage",C)},D=V(()=>r.value?o.value:n.list);return(C,s)=>(b(),T("div",$u,[qu,(b(),k(Ie,{key:I.value,columns:$.value,loading:l.value,pagination:I.value,rows:D.value,"rows-per-page-options":i.value==oe(L).Page?[10]:[5,7,10,15,20,25,50,0],class:"table-city","row-key":"name",title:"\u0417\u0430\u043A\u0430\u0437\u044B"},tu({"top-left":x(()=>[d(N,{"model-value":r.value,debounce:"300",dense:"",outlined:"",placeholder:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044E \u0433\u043E\u0440\u043E\u0434\u0430",standout:"","onUpdate:modelValue":oe(z)},{append:x(()=>[d(me,{name:"search"})]),_:1},8,["model-value","onUpdate:modelValue"])]),body:x(c=>[d(Ne,{props:c,class:"table-city__row"},{default:x(()=>[(b(!0),T(H,null,he(c.cols,_=>(b(),k(je,{key:_.name,props:c},{default:x(()=>[_.name==="name"?(b(),T(H,{key:0},[U(R(_.value)+" ",1),d(ye,{modelValue:c.row.name,"onUpdate:modelValue":f=>c.row.name=f},{default:x(f=>[d(N,{modelValue:f.value,"onUpdate:modelValue":E=>f.value=E,modelModifiers:{trim:!0},autofocus:"",counter:"",dense:"",onKeyup:Q(E=>v(q(c),f.value,f),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):_.name==="minPrice"?(b(),T(H,{key:1},[U(R(_.value)+" ",1),d(ye,{modelValue:c.row.minPrice,"onUpdate:modelValue":f=>c.row.minPrice=f},{default:x(f=>[d(N,{modelValue:f.value,"onUpdate:modelValue":E=>f.value=E,modelModifiers:{number:!0},autofocus:"",counter:"",dense:"",onKeyup:Q(E=>K(q(c),f.value,f),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])],64)):_.name==="_id"?(b(),T(H,{key:2},[],64)):_.name==="delete"?(b(),k(A,{key:3,class:"cursor-pointer",color:"red",dense:"",onClick:f=>M(q(c))},{default:x(()=>[d(me,{name:"delete",size:"xs"})]),_:2},1032,["onClick"])):(b(),T(H,{key:4},[U(R(_.value),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"top-right":x(()=>[d(A,{disable:!D.value.length,loading:F.value,color:"primary","icon-right":"archive",label:"\u042D\u043A\u0441\u043F\u043E\u0440\u0442 \u0432 csv","no-caps":"",onClick:y},null,8,["disable","loading"])]),_:2},[i.value==oe(L).Page?{name:"pagination",fn:x(c=>[h("b",null,R(c.pagination.page),1),U(" \xA0 \u0438\u0437\xA0 "),h("b",null,R(c.pagesNumber),1),c.pagesNumber>2?(b(),k(A,{key:0,disable:c.isFirstPage,color:"grey-8",dense:"",flat:"",icon:"first_page",round:"",onClick:s[0]||(s[0]=_=>S(1))},null,8,["disable"])):_e("",!0),d(A,{disable:c.isFirstPage,color:"grey-8",dense:"",flat:"",icon:"chevron_left",round:"",onClick:_=>S(c.pagination.page<=1?1:c.pagination.page-1)},null,8,["disable","onClick"]),d(A,{disable:c.isLastPage,color:"grey-8",dense:"",flat:"",icon:"chevron_right",round:"",onClick:_=>c.pagination.page>=m.value?m.value:S(c.pagination.page+1)},null,8,["disable","onClick"]),c.pagesNumber>2?(b(),k(A,{key:1,disable:c.isLastPage,color:"grey-8",dense:"",flat:"",icon:"last_page",round:"",onClick:s[1]||(s[1]=_=>S(m.value))},null,8,["disable"])):_e("",!0)]),key:"0"}:void 0]),1032,["columns","loading","pagination","rows","rows-per-page-options"]))]))}});var ju=X(Iu,[["__scopeId","data-v-676d1a42"]]);const Nu=e=>(se("data-v-a4c8038a"),e=e(),re(),e),Qu={class:"add"},Uu=Nu(()=>h("p",{class:"add__text"},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0433\u043E\u0440\u043E\u0434",-1)),zu=O({__name:"AddCity",emits:["add-city"],setup(e,{emit:u}){const t=u,n=g(""),o=g(0),r=g(!1),m=g(""),a=()=>{m.value="",!(!n.value||!o.value||r.value)&&(r.value=!0,w.addCity({name:n.value,minPrice:o.value},l=>{r.value=!1,t("add-city"),W.create({message:"\u263A\uFE0F \u0413\u043E\u0440\u043E\u0434 \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D",color:"positive",timeout:1500})},l=>{var i;r.value=!1,console.log(l),m.value=(i=l==null?void 0:l.message[0])!=null?i:"\u0427\u0442\u043E \u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A, \u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0432\u0432\u0435\u0434\u0435\u043D\u043D\u044B\u0435 \u0432\u0430\u043C\u0438 \u0434\u0430\u043D\u043D\u044B\u0435"}))};return(l,i)=>(b(),T("div",Qu,[Uu,d(N,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=F=>n.value=F),modelModifiers:{trim:!0},disable:r.value,error:!!m.value,"error-message":m.value,class:"add__input",dense:"",label:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0433\u043E\u0440\u043E\u0434\u0430",outlined:""},null,8,["modelValue","disable","error","error-message"]),d(N,{modelValue:o.value,"onUpdate:modelValue":i[1]||(i[1]=F=>o.value=F),modelModifiers:{number:!0},disable:r.value,class:"add__input",dense:"",label:"\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u0430\u044F \u0441\u0442\u043E\u0438\u043C\u043E\u0441\u0442\u044C",outlined:"",onKeyup:Q(a,["enter"])},null,8,["modelValue","disable"]),d(A,{disable:r.value||!n.value||!o.value,class:"add__button full-width q-mt-sm",color:"primary",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",standout:"",unelevated:"",onClick:J(a,["stop"]),onKeyup:Q(a,["enter"])},null,8,["disable"])]))}});var Mu=X(zu,[["__scopeId","data-v-a4c8038a"]]);const Ou=e=>(se("data-v-fde55070"),e=e(),re(),e),Ku=Ou(()=>h("h2",{class:"card__title",textContent:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"},null,-1)),Lu={class:"cities"},Ru=O({name:"SettingsComponent",__name:"index",setup(e){const u=g("city"),t=g([]),n=g({currentPage:1,perPageCount:10,total:10}),o=g(!1),r=g(!1),m=async a=>{o.value=!0,await w.getCities({currentPage:a},l=>{t.value=l.data,n.value={currentPage:l.currentPage,perPageCount:l.perPageCount,total:l.total},r.value=!1,o.value=!1},l=>{o.value=!1,console.log(l)})};return ie(async()=>{r.value=!0,await m(1)}),(a,l)=>(b(),k(Te,{class:"card"},{default:x(()=>[d(Be,null,{default:x(()=>[Ku,d($e,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=i=>u.value=i),"active-color":"primary",align:"left",class:"shadow-2 text-grey",dense:"","indicator-color":"primary","inline-label":"","mobile-arrows":"","narrow-indicator":"","outside-arrows":""},{default:x(()=>[d(ue,{name:"city",icon:"apartment",label:"\u0413\u043E\u0440\u043E\u0434\u0430"},null,8,["name"]),d(ue,{name:"commission",icon:"payments",label:"\u041A\u043E\u043C\u0438\u0441\u0441\u0438\u044F"},null,8,["name"]),d(ue,{name:"text",icon:"description",label:"\u0422\u0435\u043A\u0441\u0442\u0430"},null,8,["name"]),d(ue,{name:"images",icon:"image",label:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F"},null,8,["name"])]),_:1},8,["modelValue"]),d(ne),d(qe,{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=i=>u.value=i),animated:""},{default:x(()=>[d(te,{name:"city",class:"q-px-none"},{default:x(()=>[h("div",Lu,[r.value?(b(),k(Qe,{key:0,title:"\u0417\u0430\u043A\u0430\u0437\u044B"})):(b(),k(ju,{key:n.value,list:t.value,loading:o.value,pagination:n.value,onUpdate:l[1]||(l[1]=i=>m(n.value.currentPage)),onSelectPage:l[2]||(l[2]=i=>m(i))},null,8,["list","loading","pagination"])),d(Mu,{onAddCity:l[3]||(l[3]=i=>m(n.value.currentPage))})])]),_:1},8,["name"]),d(te,{name:"commission",class:"q-px-none"},{default:x(()=>[d(iu)]),_:1},8,["name"]),d(te,{name:"text",class:"q-px-none"},{default:x(()=>[d(Cu)]),_:1},8,["name"]),d(te,{name:"images",class:"q-px-none"},{default:x(()=>[d(Bu)]),_:1},8,["name"])]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});var Hu=X(Ru,[["__scopeId","data-v-fde55070"]]);const rt=O({__name:"SettingsPage",setup(e){return(u,t)=>(b(),k(ke,{class:"row justify-evenly items-start q-pa-lg"},{default:x(()=>[d(Hu)]),_:1}))}});export{rt as default};
